## 智能蛇

### VT100控制码

其实控制码可以做的事情很多，可以清屏，可以移动光标（这样想在哪输出，就在哪输出），还可以清除屏幕上的内容。这些又可以通过自己编写一些函数来实现。

设定光标位置

```C
void set_cursor(int x, int y)
{
    printf("\033[%d;%dH", x, y);
}
```

清屏

```C
void clear()
{
    printf("\033[2J");
    set_cursor(1, 1);
}
```

### 检测键盘输入

kbhit函数的功能其实只是检测有无按键被按下，它本来是Windows下面的函数，为了在Linux下面用只好手动实现。
但是更重要的，tty_set函数做到的功能是把终端自带的关闭回显和非阻塞读取的功能打开。

kbhit的作用其实很多，如果想要完善程序功能是离不开它的。在很多时候，我们需要等待用户操作，只有用户按键，我们才需要读取输入并执行对应操作，这就需要利用它。

### 智能算法

生成障碍其实是很简单的，既可以规定一些指定的障碍图形，然后随机选取位置和面朝方向，也可以人工读入地图模板。

但是这个只能算法着实太智障了。

显然这个算法用的是贪心策略。用和食物的“距离”（横纵坐标差的绝对值的和）衡量当前局面，当前所有可行的移动方向作为一个集合，从中选择一种使得“距离”的减小量最大的。（牛顿下山）

这个算法很容易被障碍物玩死，因为贪心是求局部最优解的，这样子的话很容易走到一个位置，它和食物的“距离”确实是最小值又没吃到食物，隔着障碍又不愿意走出去。比如说有一堵很长的墙，食物在一边并且在中轴线的位置上，只有从两边绕才能走过去，但是按照之前的智能算法，蛇头如果在另一边的话，很容易就会停在中轴线上顶着墙不愿意过去了。想要解决这个问题只能用搜索来求可行路线，不过地图一大这么做就会很慢很慢了。那个时候就需要启发式搜索了。